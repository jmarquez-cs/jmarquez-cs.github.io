import{o as e,C as t,n as r}from"./message.Ve-2rN-7.js";import{e as n,d as o,T as s,a as i,b as a,c as h,f as c,g as p,h as u,i as f}from"./decode.9RDMYjMh.js";import{a as d}from"./scalable-cuckoo-filter.BKNYiDuL.js";const l=85;const w=Object.freeze(Object.defineProperty({__proto__:null,code:85,decode:function(t){return e(t)},encode:function(t){return e(t)},name:"raw"},Symbol.toStringTag,{value:"Module"}));function y(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}const m={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const r=t.asCID(e);if(!r)return null;const n=new Uint8Array(r.bytes.byteLength+1);return n.set(r.bytes,1),[new s(i.tag,42),new s(i.bytes,n)]},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},b={...m,typeEncoders:{...m.typeEncoders}};const g={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};g.tags[42]=function(e){if(0!==e[0])throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return t.decode(e.subarray(1))};const k={...g,tags:g.tags.slice()},v=113,_=e=>o(y(e),g),E=Object.freeze(Object.defineProperty({__proto__:null,code:113,decode:_,decodeOptions:k,encode:e=>n(e,m),encodeOptions:b,name:"dag-cbor",toByteView:y},Symbol.toStringTag,{value:"Module"}));class D extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){const t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===i.array&&(t.elements++,1!==t.elements&&e.push([44])),t.type===i.map&&(t.elements++,1!==t.elements&&(t.elements%2==1?e.push([44]):e.push([58]))))}[i.uint.major](e,t){this.prefix(e);const r=String(t.value),n=[];for(let o=0;o<r.length;o++)n[o]=r.charCodeAt(o);e.push(n)}[i.negint.major](e,t){this[i.uint.major](e,t)}[i.bytes.major](e,t){throw new Error(`${h} unsupported type: Uint8Array`)}[i.string.major](e,t){this.prefix(e);const r=c(JSON.stringify(t.value));e.push(r.length>32?p(r):r)}[i.array.major](e,t){this.prefix(e),this.inRecursive.push({type:i.array,elements:0}),e.push([91])}[i.map.major](e,t){this.prefix(e),this.inRecursive.push({type:i.map,elements:0}),e.push([123])}[i.tag.major](e,t){}[i.float.major](e,t){if("break"===t.type.name){const t=this.inRecursive.pop();if(t){if(t.type===i.array)e.push([93]);else{if(t.type!==i.map)throw new Error("Unexpected recursive type; this should not happen!");e.push([125])}return}throw new Error("Unexpected break; this should not happen!")}if(void 0===t.value)throw new Error(`${h} unsupported type: undefined`);if(this.prefix(e),"true"===t.type.name)return void e.push([116,114,117,101]);if("false"===t.type.name)return void e.push([102,97,108,115,101]);if("null"===t.type.name)return void e.push([110,117,108,108]);const r=String(t.value),n=[];let o=!1;for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s),o||46!==n[s]&&101!==n[s]&&69!==n[s]||(o=!0);o||(n.push(46),n.push(48)),e.push(n)}}const T={addBreakTokens:!0,mapSorter:function(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw new Error(`${h} complex map keys are not supported`);const r=e[0],n=t[0];if(r.type!==i.string||n.type!==i.string)throw new Error(`${h} non-string map keys are not supported`);if(r<n)return-1;if(r>n)return 1;throw new Error(`${h} unexpected duplicate map keys, this is not supported`)}};class A{constructor(e,t={}){this._pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;32===e||9===e||13===e||10===e;)e=this.data[++this._pos]}expect(e){if(this.data.length-this._pos<e.length)throw new Error(`${u} unexpected end of input at position ${this._pos}`);for(let t=0;t<e.length;t++)if(this.data[this._pos++]!==e[t])throw new Error(`${u} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){const e=this._pos;let t=!1,r=!1;const n=e=>{for(;!this.done();){const t=this.ch();if(!e.includes(t))break;this._pos++}};if(45===this.ch()&&(t=!0,this._pos++),48===this.ch()){if(this._pos++,46!==this.ch())return new s(i.uint,0,this._pos-e);this._pos++,r=!0}if(n([48,49,50,51,52,53,54,55,56,57]),t&&this._pos===e+1)throw new Error(`${u} unexpected token at position ${this._pos}`);if(!this.done()&&46===this.ch()){if(r)throw new Error(`${u} unexpected token at position ${this._pos}`);r=!0,this._pos++,n([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(r=!0,this._pos++,this.done()||43!==this.ch()&&45!==this.ch()||this._pos++,n([48,49,50,51,52,53,54,55,56,57]));const o=String.fromCharCode.apply(null,this.data.subarray(e,this._pos)),a=parseFloat(o);return r?new s(i.float,a,this._pos-e):!0!==this.options.allowBigInt||Number.isSafeInteger(a)?new s(a>=0?i.uint:i.negint,a,this._pos-e):new s(a>=0?i.uint:i.negint,BigInt(o),this._pos-e)}parseString(){if(34!==this.ch())throw new Error(`${u} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let o=this._pos,a=0;o<this.data.length&&a<65536;o++,a++){const e=this.data[o];if(92===e||e<32||e>=128)break;if(34===e){const e=String.fromCharCode.apply(null,this.data.subarray(this._pos,o));return this._pos=o+1,new s(i.string,e,a)}}const e=this._pos,t=[],r=()=>{if(this._pos+4>=this.data.length)throw new Error(`${u} unexpected end of unicode escape sequence at position ${this._pos}`);let e=0;for(let t=0;t<4;t++){let t=this.ch();if(t>=48&&t<=57)t-=48;else if(t>=97&&t<=102)t=t-97+10;else{if(!(t>=65&&t<=70))throw new Error(`${u} unexpected unicode escape character at position ${this._pos}`);t=t-65+10}e=16*e+t,this._pos++}return e},n=()=>{const e=this.ch();let r,n,o,s,i=null,a=e>239?4:e>223?3:e>191?2:1;if(this._pos+a>this.data.length)throw new Error(`${u} unexpected unicode sequence at position ${this._pos}`);switch(a){case 1:e<128&&(i=e);break;case 2:r=this.data[this._pos+1],128==(192&r)&&(s=(31&e)<<6|63&r,s>127&&(i=s));break;case 3:r=this.data[this._pos+1],n=this.data[this._pos+2],128==(192&r)&&128==(192&n)&&(s=(15&e)<<12|(63&r)<<6|63&n,s>2047&&(s<55296||s>57343)&&(i=s));break;case 4:r=this.data[this._pos+1],n=this.data[this._pos+2],o=this.data[this._pos+3],128==(192&r)&&128==(192&n)&&128==(192&o)&&(s=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&o,s>65535&&s<1114112&&(i=s))}null===i?(i=65533,a=1):i>65535&&(i-=65536,t.push(i>>>10&1023|55296),i=56320|1023&i),t.push(i),this._pos+=a};for(;!this.done();){const o=this.ch();let a;switch(o){case 92:if(this._pos++,this.done())throw new Error(`${u} unexpected string termination at position ${this._pos}`);switch(a=this.ch(),this._pos++,a){case 34:case 39:case 92:case 47:t.push(a);break;case 98:t.push(8);break;case 116:t.push(9);break;case 110:t.push(10);break;case 102:t.push(12);break;case 114:t.push(13);break;case 117:t.push(r());break;default:throw new Error(`${u} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new s(i.string,f(t),this._pos-e);default:if(o<32)throw new Error(`${u} invalid control character at position ${this._pos}`);o<128?(t.push(o),this._pos++):n()}}throw new Error(`${u} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new s(i.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new s(i.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new s(i.null,null,4);case 102:return this.expect([102,97,108,115,101]),new s(i.false,!1,5);case 116:return this.expect([116,114,117,101]),new s(i.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${u} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this._pos++,this.skipWhitespace(),new s(i.break,void 0,1);if(44!==this.ch())throw new Error(`${u} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":return this.modeStack.pop(),93===this.ch()?(this._pos++,this.skipWhitespace(),new s(i.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(125===this.ch())return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new s(i.break,void 0,1);if(44!==this.ch())throw new Error(`${u} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),125===this.ch())return this._pos++,this.skipWhitespace(),new s(i.break,void 0,1);const e=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw new Error(`${u} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${u} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function x(e){const t=r.encode(e).slice(1);return[new s(i.map,1/0,1),new s(i.string,"/",1),new s(i.map,1/0,1),new s(i.string,"bytes",5),new s(i.string,t,t.length),new s(i.break,void 0,1),new s(i.break,void 0,1)]}function I(e){return x(new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}const B={typeEncoders:{Object:function(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;const r=t.asCID(e);if(!r)return null;const n=r.toString();return[new s(i.map,1/0,1),new s(i.string,"/",1),new s(i.string,n,n.length),new s(i.break,void 0,1)]},Buffer:x,Uint8Array:x,Int8Array:I,Uint16Array:I,Int16Array:I,Uint32Array:I,Int32Array:I,Float32Array:I,Float64Array:I,Uint8ClampedArray:I,BigInt64Array:I,BigUint64Array:I,DataView:I,ArrayBuffer:function(e){return x(new Uint8Array(e))},undefined:function(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};class N extends A{constructor(e,t){super(e,t),this.tokenBuffer=[]}done(){return 0===this.tokenBuffer.length&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const e=this._next();if(e.type===i.map){const e=this._next();if(e.type===i.string&&"/"===e.value){const e=this._next();if(e.type===i.string){if(this._next().type!==i.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(e),new s(i.tag,42,0)}if(e.type===i.map){const e=this._next();if(e.type===i.string&&"bytes"===e.value){const e=this._next();if(e.type===i.string){for(let e=0;e<2;e++){if(this._next().type!==i.break)throw new Error("Invalid encoded Bytes form")}const t=r.decode(`m${e.value}`);return new s(i.bytes,t,e.value.length)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}this.tokenBuffer.push(e)}return e}}const $={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};$.tags[42]=t.parse;const L=297,P=e=>{return t=e,r=B,r=Object.assign({},T,r),a(t,new D,r);var t,r},j=e=>{const t=function(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}(e);return function(e,t){return t=Object.assign({tokenizer:new A(e,t)},t),o(e,t)}(t,Object.assign($,{tokenizer:new N(t,$)}))},S=e=>z.decode(P(e)),z=new TextDecoder,H=new TextEncoder,C=Object.freeze(Object.defineProperty({__proto__:null,code:297,decode:j,encode:P,format:S,name:"dag-json",parse:e=>j(H.encode(e)),stringify:S},Symbol.toStringTag,{value:"Module"})),U=new TextDecoder;function G(e,t){let r=0;for(let n=0;;n+=7){if(n>=64)throw new Error("protobuf: varint overflow");if(t>=e.length)throw new Error("protobuf: unexpected end of data");const o=e[t++];if(r+=n<28?(127&o)<<n:(127&o)*2**n,o<128)break}return[r,t]}function M(e,t){let r;[r,t]=G(e,t);const n=t+r;if(r<0||n<0)throw new Error("protobuf: invalid length");if(n>e.length)throw new Error("protobuf: unexpected end of data");return[e.subarray(t,n),n]}function O(e,t){let r;return[r,t]=G(e,t),[7&r,r>>3,t]}function W(e){const t={},r=e.length;let n=0;for(;n<r;){let r,o;if([r,o,n]=O(e,n),1===o){if(t.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(2!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Hash`);if(void 0!==t.Name)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,n]=M(e,n)}else if(2===o){if(void 0!==t.Name)throw new Error("protobuf: (PBLink) duplicate Name section");if(2!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Name`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let o;[o,n]=M(e,n),t.Name=U.decode(o)}else{if(3!==o)throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${o}`);if(void 0!==t.Tsize)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(0!==r)throw new Error(`protobuf: (PBLink) wrong wireType (${r}) for Tsize`);[t.Tsize,n]=G(e,n)}}if(n>r)throw new Error("protobuf: (PBLink) unexpected end of data");return t}const V=new TextEncoder,R=2**32,F=2**31;function q(e,t){let r=t.length;if("number"==typeof e.Tsize){if(e.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw new Error("Tsize too large for encoding");r=Q(t,r,e.Tsize)-1,t[r]=24}if("string"==typeof e.Name){const n=V.encode(e.Name);r-=n.length,t.set(n,r),r=Q(t,r,n.length)-1,t[r]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),r=Q(t,r,e.Hash.length)-1,t[r]=10),t.length-r}function K(e){const t=function(e){let t=0;if(e.Data){const r=e.Data.length;t+=1+r+X(r)}if(e.Links)for(const r of e.Links){const e=J(r);t+=1+e+X(e)}return t}(e),r=new Uint8Array(t);let n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),n=Q(r,n,e.Data.length)-1,r[n]=10),e.Links)for(let o=e.Links.length-1;o>=0;o--){const t=q(e.Links[o],r.subarray(0,n));n-=t,n=Q(r,n,t)-1,r[n]=18}return r}function J(e){let t=0;if(e.Hash){const r=e.Hash.length;t+=1+r+X(r)}if("string"==typeof e.Name){const r=V.encode(e.Name).length;t+=1+r+X(r)}return"number"==typeof e.Tsize&&(t+=1+X(e.Tsize)),t}function Q(e,t,r){const n=t-=X(r);for(;r>=F;)e[t++]=127&r|128,r/=128;for(;r>=128;)e[t++]=127&r|128,r>>>=7;return e[t]=r,n}function X(e){return e%2==0&&e++,Math.floor((function(e){let t=0;e>=R&&(e=Math.floor(e/R),t=32);e>=65536&&(e>>>=16,t+=16);e>=256&&(e>>>=8,t+=8);return t+Y[e]}(e)+6)/7)}const Y=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],Z=["Data","Links"],ee=["Hash","Name","Tsize"],te=new TextEncoder;function re(e,t){if(e===t)return 0;const r=e.Name?te.encode(e.Name):[],n=t.Name?te.encode(t.Name):[];let o=r.length,s=n.length;for(let i=0,a=Math.min(o,s);i<a;++i)if(r[i]!==n[i]){o=r[i],s=n[i];break}return o<s?-1:s<o?1:0}function ne(e,t){return!Object.keys(e).some(e=>!t.includes(e))}function oe(e){if("object"==typeof e.asCID){const r=t.asCID(e);if(!r)throw new TypeError("Invalid DAG-PB form");return{Hash:r}}if("object"!=typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const r={};if(e.Hash){let o=t.asCID(e.Hash);try{o||("string"==typeof e.Hash?o=t.parse(e.Hash):e.Hash instanceof Uint8Array&&(o=t.decode(e.Hash)))}catch(n){throw new TypeError(`Invalid DAG-PB form: ${n.message}`)}o&&(r.Hash=o)}if(!r.Hash)throw new TypeError("Invalid DAG-PB form");return"string"==typeof e.Name&&(r.Name=e.Name),"number"==typeof e.Tsize&&(r.Tsize=e.Tsize),r}function se(e){if((e instanceof Uint8Array||"string"==typeof e)&&(e={Data:e}),"object"!=typeof e||Array.isArray(e))throw new TypeError("Invalid DAG-PB form");const t={};if(void 0!==e.Data)if("string"==typeof e.Data)t.Data=te.encode(e.Data);else{if(!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form");t.Data=e.Data}if(void 0!==e.Links){if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form");t.Links=e.Links.map(oe),t.Links.sort(re)}else t.Links=[];return t}function ie(e){if(!e||"object"!=typeof e||Array.isArray(e)||e instanceof Uint8Array||e["/"]&&e["/"]===e.bytes)throw new TypeError("Invalid DAG-PB form");if(!ne(e,Z))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(e.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let t=0;t<e.Links.length;t++){const r=e.Links[t];if(!r||"object"!=typeof r||Array.isArray(r)||r instanceof Uint8Array||r["/"]&&r["/"]===r.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!ne(r,ee))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(void 0===r.Hash)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(null==r.Hash||!r.Hash["/"]||r.Hash["/"]!==r.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==r.Name&&"string"!=typeof r.Name)throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==r.Tsize){if("number"!=typeof r.Tsize||r.Tsize%1!=0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(r.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(t>0&&-1===re(r,e.Links[t-1]))throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}const ae=112;function he(e){ie(e);const t={};return e.Links&&(t.Links=e.Links.map(e=>{const t={};return e.Hash&&(t.Hash=e.Hash.bytes),void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t})),e.Data&&(t.Data=e.Data),K(t)}function ce(e){const r=function(e){const t=e.length;let r,n,o=0,s=!1;for(;o<t;){let t,i;if([t,i,o]=O(e,o),2!==t)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${t}`);if(1===i){if(n)throw new Error("protobuf: (PBNode) duplicate Data section");[n,o]=M(e,o),r&&(s=!0)}else{if(2!==i)throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${i}`);{if(s)throw new Error("protobuf: (PBNode) duplicate Links section");let t;r||(r=[]),[t,o]=M(e,o),r.push(W(t))}}}if(o>t)throw new Error("protobuf: (PBNode) unexpected end of data");const i={};return n&&(i.Data=n),i.Links=r||[],i}(function(e){return e instanceof ArrayBuffer?new Uint8Array(e,0,e.byteLength):e}(e)),n={};return r.Data&&(n.Data=r.Data),r.Links&&(n.Links=r.Links.map(e=>{const r={};try{r.Hash=t.decode(e.Hash)}catch{}if(!r.Hash)throw new Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(r.Name=e.Name),void 0!==e.Tsize&&(r.Tsize=e.Tsize),r})),n}const pe=Object.freeze(Object.defineProperty({__proto__:null,code:112,createLink:function(e,t,r){return oe({Hash:r,Name:e,Tsize:t})},createNode:function(e,t=[]){return se({Data:e,Links:t})},decode:ce,encode:he,name:"dag-pb",prepare:se,validate:ie},Symbol.toStringTag,{value:"Module"}));function ue(e,t){let r=0;if(null!=e[Symbol.asyncIterator])return async function*(){for await(const n of e)yield t(n,r++)}();const n=d(e),{value:o,done:s}=n.next();if(!0===s)return function*(){}();const i=t(o,r++);if("function"==typeof i.then)return async function*(){yield await i;for(const e of n)yield t(e,r++)}();const a=t;return function*(){yield i;for(const e of n)yield a(e,r++)}()}function fe(e){if(null!=e[Symbol.asyncIterator])return(async()=>{for await(const t of e)return t})();for(const t of e)return t}export{_ as a,j as b,l as c,pe as d,he as e,fe as f,ce as g,ae as h,L as i,v as j,C as k,E as l,ue as m,se as p,w as r};
