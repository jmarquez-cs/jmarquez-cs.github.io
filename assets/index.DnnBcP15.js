var e,t,n,r,s,i,o,a,c,u,l,h,f,d,p,m,C,v,y,g,w,b,F,x,E,_,k,T,I=Object.defineProperty,$=e=>{throw TypeError(e)},M=(e,t,n)=>((e,t,n)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n),S=(e,t,n)=>t.has(e)||$("Cannot "+n),O=(e,t,n)=>(S(e,t,"read from private field"),n?n.call(e):t.get(e)),P=(e,t,n)=>t.has(e)?$("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),N=(e,t,n,r)=>(S(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),W=(e,t,n)=>(S(e,t,"access private method"),n),A=(e,t,n,r)=>({set _(r){N(e,t,r,n)},get _(){return O(e,t,r)}});import{b as j,l as z,n as L}from"./message.Ve-2rN-7.js";import{g as q}from"./mermaid-core.CmyEpniE.js";const D=1e3,V=60*D,R=60*V,Y=24*R,J=7*Y,B=365.25*Y;function U(e,t){try{if("string"==typeof e&&e.length>0)return function(e){if((e=String(e)).length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return NaN;const n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*B;case"weeks":case"week":case"w":return n*J;case"days":case"day":case"d":return n*Y;case"hours":case"hour":case"hrs":case"hr":case"h":return n*R;case"minutes":case"minute":case"mins":case"min":case"m":return n*V;case"seconds":case"second":case"secs":case"sec":case"s":return n*D;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:throw new Error(`The unit ${r} was matched, but no matching case exists.`)}}(e);if("number"==typeof e&&isFinite(e))return(null==t?void 0:t.long)?function(e){const t=Math.abs(e);if(t>=Y)return Z(e,t,Y,"day");if(t>=R)return Z(e,t,R,"hour");if(t>=V)return Z(e,t,V,"minute");if(t>=D)return Z(e,t,D,"second");return`${e} ms`}(e):function(e){const t=Math.abs(e);if(t>=Y)return`${Math.round(e/Y)}d`;if(t>=R)return`${Math.round(e/R)}h`;if(t>=V)return`${Math.round(e/V)}m`;if(t>=D)return`${Math.round(e/D)}s`;return`${e}ms`}(e);throw new Error("Value is not a string or number.")}catch(n){const t=function(e){return"object"==typeof e&&null!==e&&"message"in e}(n)?`${n.message}. value=${JSON.stringify(e)}`:"An unknown error has occured.";throw new Error(t)}}function Z(e,t,n,r){const s=t>=1.5*n;return`${Math.round(e/n)} ${r}${s?"s":""}`}var G={};const H=function(){try{return localStorage}catch(e){}}();const K=console.debug??console.log??(()=>{});const Q=function(e){function t(e){let r,s,i,o=null;function a(...e){if(!a.enabled)return;const n=a,s=Number(new Date),i=s-(r||s);n.diff=i,n.prev=r,n.curr=s,r=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let o=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,s)=>{if("%%"===r)return"%";o++;const i=t.formatters[s];if("function"==typeof i){const t=e[o];r=i.call(n,t),e.splice(o,1),o--}return r}),t.formatArgs.call(n,e);(n.log||t.log).apply(n,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=n,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(s!==t.namespaces&&(s=t.namespaces,i=t.enabled(e)),i),set:e=>{o=e}}),"function"==typeof t.init&&t.init(a),a}function n(e,n){const r=t(this.namespace+(void 0===n?":":n)+e);return r.log=this.log,r}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack??e.message;return e},t.disable=function(){const e=[...t.names.map(r),...t.skips.map(r).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.namespaces=e,t.names=[],t.skips=[];const r=("string"==typeof e?e:"").split(/[\s,]+/),s=r.length;for(n=0;n<s;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=U,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(n=>{t[n]=e[n]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.setupFormatters(t.formatters),t.enable(t.load()),t}({formatArgs:function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+U(this.diff),!this.useColors)return;const t="color: "+this.color;e.splice(1,0,t,"color: inherit");let n=0,r=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(r=n))}),e.splice(r,0,t)},save:function(e){try{e?null==H||H.setItem("debug",e):null==H||H.removeItem("debug")}catch(t){}},load:function(){let e;try{e=null==H?void 0:H.getItem("debug")}catch(t){}return!e&&void 0!==globalThis.process&&"env"in globalThis.process&&(e=G.DEBUG),e},useColors:function(){var e,t,n,r,s;return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||null==(null==(e=navigator.userAgent)?void 0:e.toLowerCase().match(/(edge|trident)\/(\d+)/)))&&("undefined"!=typeof document&&(null==(n=null==(t=document.documentElement)?void 0:t.style)?void 0:n.WebkitAppearance)||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&null!=(null==(r=navigator.userAgent)?void 0:r.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&(null==(s=navigator.userAgent)?void 0:s.toLowerCase().match(/applewebkit\/(\d+)/)))},setupFormatters:function(e){e.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},colors:["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],storage:H,log:K});function X(){return{forComponent:e=>ee(e)}}function ee(e){let t=function(e){const t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}(`${e}:trace`);return Q.enabled(`${e}:trace`)&&null!=Q.names.map(e=>e.toString()).find(e=>e.includes(":trace"))&&(t=Q(`${e}:trace`)),Object.assign(Q(e),{error:Q(`${e}:error`),trace:t})}function te(e){if(null!=e&&0!==(e=e.trim()).length)return e}Q.formatters.b=e=>null==e?"undefined":j.baseEncode(e),Q.formatters.t=e=>null==e?"undefined":z.baseEncode(e),Q.formatters.m=e=>null==e?"undefined":L.baseEncode(e),Q.formatters.p=e=>null==e?"undefined":e.toString(),Q.formatters.c=e=>null==e?"undefined":e.toString(),Q.formatters.k=e=>null==e?"undefined":e.toString(),Q.formatters.a=e=>null==e?"undefined":e.toString(),Q.formatters.e=e=>null==e?"undefined":te(e.stack)??te(e.message)??e.toString();var ne={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function s(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function i(e,t,r,i,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new s(r,i||e,o),c=n?n+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),a.prototype.eventNames=function(){var e,r,s=[];if(0===this._eventsCount)return s;for(r in e=this._events)t.call(e,r)&&s.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(e)):s},a.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var s=0,i=r.length,o=new Array(i);s<i;s++)o[s]=r[s].fn;return o},a.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},a.prototype.emit=function(e,t,r,s,i,o){var a=n?n+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,s),!0;case 5:return l.fn.call(l.context,t,r,s,i),!0;case 6:return l.fn.call(l.context,t,r,s,i,o),!0}for(u=1,c=new Array(h-1);u<h;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var f,d=l.length;for(u=0;u<d;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),h){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,r);break;case 4:l[u].fn.call(l[u].context,t,r,s);break;default:if(!c)for(f=1,c=new Array(h-1);f<h;f++)c[f-1]=arguments[f];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,n){return i(this,e,t,n,!1)},a.prototype.once=function(e,t,n){return i(this,e,t,n,!0)},a.prototype.removeListener=function(e,t,r,s){var i=n?n+e:e;if(!this._events[i])return this;if(!t)return o(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||s&&!a.once||r&&a.context!==r||o(this,i);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||s&&!a[c].once||r&&a[c].context!==r)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:o(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a}(ne);const re=q(ne.exports);class se extends Error{constructor(e){super(e),this.name="TimeoutError"}}class ie extends Error{constructor(e){super(),this.name="AbortError",this.message=e}}const oe=e=>void 0===globalThis.DOMException?new ie(e):new DOMException(e),ae=e=>{const t=void 0===e.reason?oe("This operation was aborted."):e.reason;return t instanceof Error?t:oe(t)};function ce(e,t){const{milliseconds:n,fallback:r,message:s,customTimers:i={setTimeout:setTimeout,clearTimeout:clearTimeout}}=t;let o,a;const c=new Promise((c,u)=>{if("number"!=typeof n||1!==Math.sign(n))throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${n}\``);if(t.signal){const{signal:e}=t;e.aborted&&u(ae(e)),a=()=>{u(ae(e))},e.addEventListener("abort",a,{once:!0})}if(n===Number.POSITIVE_INFINITY)return void e.then(c,u);const l=new se;o=i.setTimeout.call(void 0,()=>{if(r)try{c(r())}catch(t){u(t)}else"function"==typeof e.cancel&&e.cancel(),!1===s?c():s instanceof Error?u(s):(l.message=s??`Promise timed out after ${n} milliseconds`,u(l))},n),(async()=>{try{c(await e)}catch(t){u(t)}})()}).finally(()=>{c.clear(),a&&t.signal&&t.signal.removeEventListener("abort",a)});return c.clear=()=>{i.clearTimeout.call(void 0,o),o=void 0},c}class ue{constructor(){P(this,e,[])}enqueue(t,n){const r={priority:(n={priority:0,...n}).priority,id:n.id,run:t};if(0===this.size||O(this,e)[this.size-1].priority>=n.priority)return void O(this,e).push(r);const s=function(e,t,n){let r=0,s=e.length;for(;s>0;){const i=Math.trunc(s/2);let o=r+i;n(e[o],t)<=0?(r=++o,s-=i+1):s=i}return r}(O(this,e),r,(e,t)=>t.priority-e.priority);O(this,e).splice(s,0,r)}setPriority(t,n){const r=O(this,e).findIndex(e=>e.id===t);if(-1===r)throw new ReferenceError(`No promise function with the id "${t}" exists in the queue.`);const[s]=O(this,e).splice(r,1);this.enqueue(s.run,{priority:n,id:t})}dequeue(){const t=O(this,e).shift();return null==t?void 0:t.run}filter(t){return O(this,e).filter(e=>e.priority===t.priority).map(e=>e.run)}get size(){return O(this,e).length}}e=new WeakMap;class le extends re{constructor(e){var v,y;if(super(),P(this,C),P(this,t),P(this,n),P(this,r,0),P(this,s),P(this,i),P(this,o,0),P(this,a),P(this,c),P(this,u),P(this,l),P(this,h,0),P(this,f),P(this,d),P(this,p),P(this,m,1n),M(this,"timeout"),!("number"==typeof(e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:ue,...e}).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(null==(v=e.intervalCap)?void 0:v.toString())??""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(null==(y=e.interval)?void 0:y.toString())??""}\` (${typeof e.interval})`);N(this,t,e.carryoverConcurrencyCount),N(this,n,e.intervalCap===Number.POSITIVE_INFINITY||0===e.interval),N(this,s,e.intervalCap),N(this,i,e.interval),N(this,u,new e.queueClass),N(this,l,e.queueClass),this.concurrency=e.concurrency,this.timeout=e.timeout,N(this,p,!0===e.throwOnTimeout),N(this,d,!1===e.autoStart)}get concurrency(){return O(this,f)}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);N(this,f,e),W(this,C,_).call(this)}setPriority(e,t){O(this,u).setPriority(e,t)}async add(e,t={}){return t.id??(t.id=(A(this,m)._++).toString()),t={timeout:this.timeout,throwOnTimeout:O(this,p),...t},new Promise((n,s)=>{O(this,u).enqueue(async()=>{var i;A(this,h)._++,A(this,r)._++;try{null==(i=t.signal)||i.throwIfAborted();let r=e({signal:t.signal});t.timeout&&(r=ce(Promise.resolve(r),{milliseconds:t.timeout})),t.signal&&(r=Promise.race([r,W(this,C,k).call(this,t.signal)]));const s=await r;n(s),this.emit("completed",s)}catch(o){if(o instanceof se&&!t.throwOnTimeout)return void n();s(o),this.emit("error",o)}finally{W(this,C,g).call(this)}},t),this.emit("add"),W(this,C,F).call(this)})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return O(this,d)?(N(this,d,!1),W(this,C,_).call(this),this):this}pause(){N(this,d,!0)}clear(){N(this,u,new(O(this,l)))}async onEmpty(){0!==O(this,u).size&&await W(this,C,T).call(this,"empty")}async onSizeLessThan(e){O(this,u).size<e||await W(this,C,T).call(this,"next",()=>O(this,u).size<e)}async onIdle(){0===O(this,h)&&0===O(this,u).size||await W(this,C,T).call(this,"idle")}get size(){return O(this,u).size}sizeBy(e){return O(this,u).filter(e).length}get pending(){return O(this,h)}get isPaused(){return O(this,d)}}t=new WeakMap,n=new WeakMap,r=new WeakMap,s=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,h=new WeakMap,f=new WeakMap,d=new WeakMap,p=new WeakMap,m=new WeakMap,C=new WeakSet,v=function(){return O(this,n)||O(this,r)<O(this,s)},y=function(){return O(this,h)<O(this,f)},g=function(){A(this,h)._--,W(this,C,F).call(this),this.emit("next")},w=function(){W(this,C,E).call(this),W(this,C,x).call(this),N(this,c,void 0)},b=function(){const e=Date.now();if(void 0===O(this,a)){const n=O(this,o)-e;if(!(n<0))return void 0===O(this,c)&&N(this,c,setTimeout(()=>{W(this,C,w).call(this)},n)),!0;N(this,r,O(this,t)?O(this,h):0)}return!1},F=function(){if(0===O(this,u).size)return O(this,a)&&clearInterval(O(this,a)),N(this,a,void 0),this.emit("empty"),0===O(this,h)&&this.emit("idle"),!1;if(!O(this,d)){const e=!O(this,C,b);if(O(this,C,v)&&O(this,C,y)){const t=O(this,u).dequeue();return!!t&&(this.emit("active"),t(),e&&W(this,C,x).call(this),!0)}}return!1},x=function(){O(this,n)||void 0!==O(this,a)||(N(this,a,setInterval(()=>{W(this,C,E).call(this)},O(this,i))),N(this,o,Date.now()+O(this,i)))},E=function(){0===O(this,r)&&0===O(this,h)&&O(this,a)&&(clearInterval(O(this,a)),N(this,a,void 0)),N(this,r,O(this,t)?O(this,h):0),W(this,C,_).call(this)},_=function(){for(;W(this,C,F).call(this););},k=async function(e){return new Promise((t,n)=>{e.addEventListener("abort",()=>{n(e.reason)},{once:!0})})},T=async function(e,t){return new Promise(n=>{const r=()=>{t&&!t()||(this.off(e,r),n())};this.on(e,r)})};export{le as P,X as d,ee as l,ce as p};
